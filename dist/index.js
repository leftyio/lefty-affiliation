!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Lefty=t():e.Lefty=t()}(self,(()=>(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function r(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}e.r(t),e.d(t,{check:()=>l,conversion:()=>p,conversionSingleProduct:()=>s,createOrder:()=>a,createProduct:()=>d,createProductItem:()=>f,pixel:()=>y,pixelSingleProduct:()=>m});var o="https://a.lefty.io";function i(e,t,r){var n=new XMLHttpRequest;n.open(e,o+t,!0),n.setRequestHeader("Content-type","application/json"),n.withCredentials=!0;var i=new Promise((function(e,t){n.onreadystatechange=function(){4===this.readyState&&(200===this.status?e(n.responseText):t(new Error(n.statusText)))}}));return r?n.send(JSON.stringify(r)):n.send(),i}function u(e){return e.map((function(e){return e.totalAmount})).reduce((function(e,t){return e+t}),0)}function a(e,t,r){return{externalOrderId:e,items:t,amount:r||u(t)}}function c(e,t){return a(e,[t],t.totalAmount)}function d(e,t){return{externalProductId:e,name:t}}function f(e,t,r,n){return{externalOrderItemId:e,product:t,totalAmount:r,quantity:n}}function l(e){return i("POST","/check?ref="+(e=e||window.location.hostname))}function p(e,t){t=t||{},e.pixelId=e.pixelId||t.pixelId,e.currencyCode=e.currencyCode||t.currencyCode,e.referringDomain=t.referer||window.location.hostname;var r="/track/conversion";return t.debug?i("POST",r,e):l(t.referer).then(function(t){if(!0===(t=JSON.parse(t)).matchable)return i("POST",r,e)}.bind(this))}function s(e,t,r){return p(c(e,t),r)}function y(e,t){t=t||{};var r=e.items||[],n=e.externalOrderId,i=e.amount,u=e.pixelId||t.pixelId,a=e.currencyCode||t.currencyCode,c=t.referer||window.location.hostname,d=o+"/track?type=conversion";if(d+="&orderId="+n,d+="&ref="+c,i&&(d+="&amount="+i),a&&(d+="&currency="+a),u&&(d+="&pixelId="+u),0!==r.length){var f=r.map((function(e){return"pId="+e.product.externalProductId})).join("&"),l=r.map((function(e){return"pName="+encodeURIComponent(e.product.name)})).join("&"),p=r.map((function(e){return"itemQty="+e.quantity})).join("&"),s=r.map((function(e){return"itemAmount="+e.totalAmount})).join("&"),y=r.map((function(e){return"itemId="+e.externalOrderItemId})).join("&");d+="&"+f,d+="&"+l,d+="&"+p,d+="&"+s,y&&(d+="&"+y)}(new Image).src=d}function m(e,t,r){return y(c(e,t),r)}window.lefty=function(){var e,t=Array.prototype.slice.call(arguments);console.log("LEFTY",t);var n=t.shift();(e=Lefty)[n].apply(e,r(t))};for(var v=window._lefty||[];v.length;){var b=v.shift();lefty.apply(void 0,r(b))}return t})()));